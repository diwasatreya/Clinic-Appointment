<div class="card p-6 mb-6">
    <form method="get" action="/admin/dashboard" class="flex flex-col sm:flex-row gap-3">
        <input type="hidden" name="tab" value="manage">
        <input type="text" name="search" value="<%= searchTerm %>" placeholder="Search by name, email, address, phoneâ€¦"
            class="flex-1 px-4 py-3 rounded-xl border border-gray-200 focus:ring-2 focus:ring-accent-green/40 focus:border-accent-green">
        <button type="submit" class="inline-flex items-center justify-center gap-2 px-5 py-3 rounded-xl font-semibold text-white bg-accent-green hover:bg-emerald-600 transition shadow-soft">
            <i class="fa-solid fa-search"></i> Search
        </button>
        <% if (searchTerm) { %>
        <a href="/admin/dashboard?tab=manage" class="inline-flex items-center justify-center px-5 py-3 rounded-xl font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 transition">
            Clear
        </a>
        <% } %>
    </form>
</div>

<% if (clinicDetails && clinicDetails.length > 0) { %>
<div class="space-y-6">
    <% clinicDetails.forEach((item) => { %>
        <% const clinic = item.clinic || item; %>
        <% const doctors = item.doctors || []; %>
        <div class="card p-6">
            <div class="flex flex-col sm:flex-row sm:items-start justify-between gap-4 mb-4">
                <div>
                    <h3 class="text-xl font-bold text-gray-900"><%= clinic.clinicName %></h3>
                    <div class="flex gap-2 mt-2">
                        <span class="px-2.5 py-0.5 rounded-full text-xs font-semibold <%= clinic.banned ? 'bg-red-100 text-red-800' : 'bg-accent-green-light text-accent-green' %>">
                            <%= clinic.banned ? 'Banned' : 'Active' %>
                        </span>
                        <span class="px-2.5 py-0.5 rounded-full text-xs font-semibold <%= clinic.approved ? 'bg-blue-100 text-blue-800' : 'bg-amber-100 text-amber-800' %>">
                            <%= clinic.approved ? 'Approved' : 'Pending' %>
                        </span>
                    </div>
                </div>
                <div class="flex gap-2 flex-wrap">
                    <% if (!clinic.banned) { %>
                    <form method="post" action="/admin/clinic/ban" class="inline">
                        <input type="hidden" name="clinicId" value="<%= clinic._id %>">
                        <button type="submit" class="inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-semibold text-white bg-red-500 hover:bg-red-600 transition"
                            onclick="return confirm('Ban this clinic?');">
                            <i class="fa-solid fa-ban"></i> Ban
                        </button>
                    </form>
                    <% } else { %>
                    <form method="post" action="/admin/clinic/unban" class="inline">
                        <input type="hidden" name="clinicId" value="<%= clinic._id %>">
                        <button type="submit" class="inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-semibold text-white bg-accent-green hover:bg-emerald-600 transition">
                            <i class="fa-solid fa-check"></i> Unban
                        </button>
                    </form>
                    <% } %>
                    <% if (clinic.approved) { %>
                    <form method="post" action="/admin/clinic/deapprove" class="inline">
                        <input type="hidden" name="clinicId" value="<%= clinic._id %>">
                        <button type="submit" class="inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-semibold text-white bg-amber-500 hover:bg-amber-600 transition"
                            onclick="return confirm('Deapprove this clinic?');">
                            <i class="fa-solid fa-times"></i> Deapprove
                        </button>
                    </form>
                    <% } %>
                </div>
            </div>
            <%- include('clinicCard', { clinic, doctors }) %>
        </div>
    <% }) %>
</div>
<% } else { %>
<div class="card p-12 text-center">
    <span class="inline-flex h-16 w-16 items-center justify-center rounded-2xl bg-gray-100 text-gray-400 mb-4">
        <i class="fa-solid fa-search text-3xl"></i>
    </span>
    <p class="text-xl text-gray-600">No clinics found</p>
</div>
<% } %>
