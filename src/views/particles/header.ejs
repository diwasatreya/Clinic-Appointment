<header class="bg-white shadow-md sticky top-0 z-10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">

        <div class="flex items-center w-auto md:w-1/4 flex-shrink-0">
            <i class="fa-solid fa-heart-pulse text-3xl text-accent-green mr-2"></i>
            <h1 class="text-3xl font-extrabold text-gray-800"><a href="/">FindaCare</a></h1>
        </div>

        <!-- Desktop Navigation -->
        <nav class="hidden md:flex flex-grow justify-center space-x-8 text-gray-600 font-medium">
            <a href="/" class="hover:text-accent-green transition duration-150 flex items-center">
                Home
            </a>
            <a href="/appointments" class="hover:text-accent-green transition duration-150 flex items-center">
               Appointments
            </a>
            <a href="/contact" class="hover:text-accent-green transition duration-150 flex items-center">
                Contact
            </a>
        </nav>

        <div class="flex items-center space-x-4 w-auto md:w-1/4 justify-end flex-shrink-0">

            <!-- Desktop Auth Links (Hidden on mobile) -->
            <div class="hidden md:flex items-center space-x-4">
                <% if(typeof user !=='undefined' && user) { %>
                    <a href="/<%= user.id %>"
                        class="hover:text-accent-green font-medium transition duration-150 hidden lg:inline-block">
                        <i class="fa-solid fa-user-circle mr-1"></i>
                        <%= user.username %>
                    </a>
                    <a href="/auth/logout"
                        class="bg-red-500 text-white px-3 py-1.5 rounded-lg hover:bg-red-600 transition duration-150 shadow-md btn-hover-scale text-sm">
                        Logout
                    </a>
                    <% } else { %>
                        <a href="/auth/login"
                            class="hover:text-accent-green transition duration-150 hidden sm:inline-block">
                            Login
                        </a>
                        <a href="/auth/signup"
                            class="bg-accent-green text-white px-3 py-1.5 rounded-lg hover:bg-green-600 transition duration-150 shadow-md btn-hover-scale text-sm">
                            Signup
                        </a>
                        <% } %>
            </div>

            <!-- Mobile Menu Button (Visible on mobile, hidden on md+) -->
            <button id="mobile-menu-toggle-button"
                class="md:hidden text-gray-700 text-2xl p-2 rounded-lg hover:bg-gray-100 transition duration-150">
                <i class="fa-solid fa-bars"></i>
            </button>
        </div>
    </div>
</header>

<!-- Mobile Menu Overlay -->
<div id="mobile-menu"
    class="fixed inset-0 bg-white z-20 transform -translate-x-full transition-transform duration-300 md:hidden p-6 shadow-2xl overflow-y-auto">
    <div class="flex justify-between items-center border-b pb-4 mb-4">
        <div class="flex items-center">
            <i class="fa-solid fa-heart-pulse text-2xl text-accent-green mr-2"></i>
            <span class="text-2xl font-extrabold text-gray-800">FindaCare</span>
        </div>
        <button id="mobile-menu-close-button"
            class="text-gray-600 text-2xl p-2 rounded-lg hover:bg-gray-100 transition duration-150">
            <i class="fa-solid fa-xmark"></i>
        </button>
    </div>

    <nav class="flex flex-col space-y-3 text-lg text-gray-700 font-medium mb-8">
        <a href="/" class="p-3 rounded-lg hover:bg-gray-50 transition duration-150 flex items-center">
            <i class="fa-solid fa-home mr-3 w-5"></i> Home
        </a>
        <a href="/appointments" class="p-3 rounded-lg hover:bg-gray-50 transition duration-150 flex items-center">
            <i class="fa-solid fa-calendar-alt mr-3 w-5"></i> My Appointments
        </a>
        <a href="/contact" class="p-3 rounded-lg hover:bg-gray-50 transition duration-150 flex items-center">
            <i class="fa-solid fa-envelope mr-3 w-5"></i> Contact Us
        </a>
    </nav>

    <div class="pt-4 border-t space-y-4">
        <% if(typeof user !=='undefined' && user) { %>
            <a href="/<%= user.id %>"
                class="block text-center bg-gray-100 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-200 transition duration-150">
                <i class="fa-solid fa-user-circle mr-1"></i>
                Profile (<%= user.username %>)
            </a>
            <a href="/auth/logout"
                class="block text-center bg-red-500 text-white py-3 rounded-lg font-semibold hover:bg-red-600 transition duration-150 shadow-md">
                <i class="fa-solid fa-sign-out-alt mr-1"></i>
                Logout
            </a>
            <% } else { %>
                <a href="/auth/login"
                    class="block text-center bg-gray-200 text-gray-800 py-3 rounded-lg font-semibold hover:bg-gray-300 transition duration-150">
                    <i class="fa-solid fa-sign-in-alt mr-1"></i>
                    Login
                </a>
                <a href="/auth/signup"
                    class="block text-center bg-accent-green text-white py-3 rounded-lg font-semibold hover:bg-green-600 transition duration-150 shadow-md">
                    <i class="fa-solid fa-user-plus mr-1"></i>
                    Sign Up
                </a>
                <% } %>
    </div>
</div>

<!-- Toast Notifications -->
<div id="toast-container" class="fixed top-6 right-6 z-[9999] flex flex-col gap-3"></div>