<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClinicFinder - Find & Book Appointments</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom scrollbar for better aesthetics */
        .clinic-list::-webkit-scrollbar {
            width: 6px;
        }

        .clinic-list::-webkit-scrollbar-thumb {
            background-color: #9ca3af;
            border-radius: 3px;
        }

        .clinic-list::-webkit-scrollbar-track {
            background-color: #f3f4f6;
        }
    </style>
</head>

<body class="bg-gray-50 font-sans min-h-screen">

    <header class="bg-white shadow-md">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <h1 class="text-3xl font-extrabold text-blue-600">ClinicFinder</h1>
            <nav class="space-x-4 flex items-center">
                <% if(user) { %>
                    <a href="#" class="text-gray-600 hover:text-blue-600 font-medium">
                        <%= user.username %>
                    </a>
                    <a href="/auth/logout"
                        class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-150 shadow-md">Logout</a>
                    <% } else { %>
                        <a href="/auth/login" class="text-gray-600 hover:text-blue-600 font-medium">Login</a>
                        <a href="/auth/signup"
                            class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-150 shadow-md">Signup</a>
                        <% } %>
            </nav>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="bg-white p-6 sm:p-10 rounded-xl shadow-2xl border border-gray-200">

            <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center">New Appointment</h2>

            <div class="flex justify-between items-center mb-10">
                <div class="flex flex-col items-center w-1/3">
                    <div id="indicator-1"
                        class="step-indicator w-10 h-10 flex items-center justify-center rounded-full border-4 font-bold text-lg transition duration-300">
                        1</div>
                    <span class="text-sm mt-2 text-blue-600 font-medium">Doctor & Date</span>
                </div>
                <div class="h-1 w-1/3 bg-gray-200"></div>
                <div class="flex flex-col items-center w-1/3">
                    <div id="indicator-2"
                        class="step-indicator w-10 h-10 flex items-center justify-center rounded-full border-4 font-bold text-lg transition duration-300">
                        2</div>
                    <span class="text-sm mt-2 text-gray-500">Select Time</span>
                </div>
                <div class="h-1 w-1/3 bg-gray-200"></div>
                <div class="flex flex-col items-center w-1/3">
                    <div id="indicator-3"
                        class="step-indicator w-10 h-10 flex items-center justify-center rounded-full border-4 font-bold text-lg transition duration-300">
                        3</div>
                    <span class="text-sm mt-2 text-gray-500">Confirm</span>
                </div>
            </div>

            <form action="/appoint" method="POST">
                <input type="text" name="clinicID" value="<%= clinicId %>" hidden>
                <div id="step-1" class="space-y-6">
                    <h3 class="text-2xl font-semibold text-gray-700">Step 1: Choose Doctor and Date</h3>
                    <div>
                        <label for="checkupType" class="block text-sm font-medium text-gray-700 mb-1">Checkup Type</label>
                        <select id="checkupType" name="checkupType"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                            <option value="general">General Practice</option>
                            <option value="cardiology">Cardiology</option>
                            <option value="dermatology">Dermatology</option>
                            <option value="pediatrics">Pediatrics</option>
                        </select>
                    </div>
                    <div>
                        <label for="doctor" class="block text-sm font-medium text-gray-700 mb-1">Select Doctor</label>
                        <select id="doctor" name="doctor_id"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                            <option value="sjohnson">Dr. Sarah Johnson - Available</option>
                            <option value="mlee">Dr. Michael Lee - Available</option>
                            <option value="erodriguez" disabled>Dr. Elena Rodriguez - Unavailable</option>
                        </select>
                    </div>
                    <div>
                        <label for="date" class="block text-sm font-medium text-gray-700 mb-1">Appointment Date</label>
                        <input id="date" name="appointment_date" type="date" value="2025-10-24" min="2025-10-24"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div class="flex justify-end pt-4">
                        <button type="button" onclick="nextStep(1)"
                            class="px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition duration-150">
                            Next: Select Time
                        </button>
                    </div>
                </div>

                <div id="step-2" class="space-y-6 hidden">
                    <h3 class="text-2xl font-semibold text-gray-700">Step 2: Choose Time Slot</h3>
                    <div class="grid grid-cols-3 sm:grid-cols-4 lg:grid-cols-5 gap-3 p-4 border rounded-lg bg-gray-50">
                        <input type="radio" id="time1" name="appointment_time" value="09:00" class="hidden peer"
                            required>
                        <label for="time1"
                            class="px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition duration-150 text-sm font-medium cursor-pointer peer-checked:bg-blue-600 peer-checked:ring-2 peer-checked:ring-offset-2 peer-checked:ring-blue-500">9:00
                            AM</label>

                        <input type="radio" id="time2" name="appointment_time" value="09:30" class="hidden peer">
                        <label for="time2"
                            class="px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition duration-150 text-sm font-medium cursor-pointer peer-checked:bg-blue-600 peer-checked:ring-2 peer-checked:ring-offset-2 peer-checked:ring-blue-500">9:30
                            AM</label>

                        <input type="radio" id="time3" name="appointment_time" value="10:00" class="hidden peer"
                            checked>
                        <label for="time3"
                            class="px-3 py-2 bg-blue-600 text-white rounded-lg ring-2 ring-offset-2 ring-blue-500 text-sm font-medium cursor-pointer peer-checked:bg-blue-600 peer-checked:ring-2 peer-checked:ring-offset-2 peer-checked:ring-blue-500">10:00
                            AM</label>

                        <input type="radio" id="time4" name="appointment_time" value="10:30" class="hidden peer">
                        <label for="time4"
                            class="px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition duration-150 text-sm font-medium cursor-pointer peer-checked:bg-blue-600 peer-checked:ring-2 peer-checked:ring-offset-2 peer-checked:ring-blue-500">10:30
                            AM</label>

                        <input type="radio" id="time5" name="appointment_time" value="11:00" class="hidden peer"
                            disabled>
                        <label for="time5"
                            class="px-3 py-2 bg-gray-300 text-gray-600 rounded-lg cursor-not-allowed text-sm font-medium">11:00
                            AM</label>

                        <input type="radio" id="time6" name="appointment_time" value="11:30" class="hidden peer">
                        <label for="time6"
                            class="px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition duration-150 text-sm font-medium cursor-pointer peer-checked:bg-blue-600 peer-checked:ring-2 peer-checked:ring-offset-2 peer-checked:ring-blue-500">11:30
                            AM</label>

                        <input type="radio" id="time7" name="appointment_time" value="13:00" class="hidden peer">
                        <label for="time7"
                            class="px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition duration-150 text-sm font-medium cursor-pointer peer-checked:bg-blue-600 peer-checked:ring-2 peer-checked:ring-offset-2 peer-checked:ring-blue-500">1:00
                            PM</label>
                    </div>
                    <div>
                        <label for="reason" class="block text-sm font-medium text-gray-700 mb-1">Reason for Visit
                            (Optional)</label>
                        <textarea id="reason" name="reason" rows="3"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"></textarea>
                    </div>
                    <div class="flex justify-between pt-4">
                        <button type="button" onclick="prevStep(2)"
                            class="px-6 py-3 bg-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-400 transition duration-150">
                            Previous
                        </button>
                        <button type="button" onclick="nextStep(2)"
                            class="px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition duration-150">
                            Next: Confirmation
                        </button>
                    </div>
                </div>

                <div id="step-3" class="space-y-6 hidden text-center">
                    <h3 class="text-2xl font-semibold text-gray-700 mb-6">Step 3: Confirm Details</h3>
                    <div class="p-6 bg-blue-50 border-2 border-blue-200 rounded-xl space-y-3">
                        <p class="text-lg font-medium text-gray-700">Doctor: <span class="font-bold text-blue-800"
                                id="confirm-doctor">Dr. Sarah
                                Johnson</span></p>
                        <p class="text-lg font-medium text-gray-700">Date: <span class="font-bold text-blue-800"
                                id="confirm-date">Thursday,
                                Oct 24, 2025</span></p>
                        <p class="text-lg font-medium text-gray-700">Time: <span class="font-bold text-blue-800"
                                id="confirm-time">10:00
                                AM</span></p>
                        <p class="text-lg font-medium text-gray-700">Clinic: <span
                                class="font-bold text-blue-800">Downtown
                                Health Clinic</span></p>
                    </div>
                    <p class="text-red-500 text-sm">By confirming, you agree to our cancellation policy.</p>
                    <div class="flex justify-between pt-4">
                        <button type="button" onclick="prevStep(3)"
                            class="px-6 py-3 bg-gray-300 text-gray-700 rounded-lg font-semibold hover:bg-gray-400 transition duration-150">
                            Previous
                        </button>
                        <button type="submit"
                            class="px-6 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition duration-150">
                            Confirm & Book Appointment
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </main>

</body>
<script>
    // Simple JS for a mock step wizard
    function nextStep(currentStep) {
        // Simple validation check for demo purposes
        if (currentStep === 1) {
            const checkupType = document.getElementById('checkupType').value;
            const doctor = document.getElementById('doctor').value;
            const date = document.getElementById('date').value;

            if (!checkupType || !doctor || !date) {
                alert('Please fill out all fields in Step 1.');
                return;
            }
        }

        document.getElementById('step-' + currentStep).classList.add('hidden');
        document.getElementById('step-' + (currentStep + 1)).classList.remove('hidden');
        updateIndicator(currentStep + 1);

        // Update confirmation step display with selected values (simplified)
        if (currentStep + 1 === 3) {
            document.getElementById('confirm-doctor').textContent = document.getElementById('doctor').options[document.getElementById('doctor').selectedIndex].text.split(" - ")[0];

            const dateInput = document.getElementById('date').value;
            const dateObject = new Date(dateInput + 'T00:00:00'); // Add T00:00:00 to prevent timezone issues
            document.getElementById('confirm-date').textContent = dateObject.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'short', day: 'numeric' });

            const selectedTimeLabel = document.querySelector('input[name="appointment_time"]:checked + label');
            document.getElementById('confirm-time').textContent = selectedTimeLabel ? selectedTimeLabel.textContent.trim() : 'N/A';
        }
    }

    function prevStep(currentStep) {
        document.getElementById('step-' + currentStep).classList.add('hidden');
        document.getElementById('step-' + (currentStep - 1)).classList.remove('hidden');
        updateIndicator(currentStep - 1);
    }

    function updateIndicator(step) {
        document.querySelectorAll('.step-indicator').forEach(el => {
            el.classList.remove('bg-blue-600', 'text-white', 'border-blue-600');
            el.classList.add('bg-gray-200', 'text-gray-500', 'border-gray-300');
        });
        document.getElementById('indicator-' + step).classList.remove('bg-gray-200', 'text-gray-500', 'border-gray-300');
        document.getElementById('indicator-' + step).classList.add('bg-blue-600', 'text-white', 'border-blue-600');

        // Update step titles
        document.querySelector('span[class*="text-blue-600"]').classList.remove('text-blue-600', 'font-medium');
        document.querySelector('span[class*="text-gray-500"]').classList.add('text-gray-500');

        const stepSpan = document.querySelector(`#indicator-${step} + span`);
        stepSpan.classList.add('text-blue-600', 'font-medium');
        stepSpan.classList.remove('text-gray-500');
    }

    // Initialize on load
    window.onload = () => updateIndicator(1);
</script>

</html>